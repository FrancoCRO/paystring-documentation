(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createContext({}),p=function(e){var t=r.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),s=p(n),m=a,d=s["".concat(i,".").concat(m)]||s[m]||u[m]||o;return n?r.a.createElement(d,l(l({ref:t},b),{},{components:n})):r.a.createElement(d,l({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var b=2;b<o;b++)i[b]=n[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},78:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(7),o=(n(0),n(100)),i={id:"remote-deployment",title:"Deploy on AWS",sidebar_label:"Deploy on AWS"},l={unversionedId:"remote-deployment",id:"remote-deployment",isDocsHomePage:!1,title:"Deploy on AWS",description:"You can set up a PayString server on AWS (Amazon Web Services) setting up your own virtual Linux server. Alternatively, you can set up a PayString server using AWS Lambda.",source:"@site/docs/remote-deployment.md",permalink:"/payid-documentation/review-apps/loisrp-test-run/fc54b5/remote-deployment",editUrl:"https://github.com/paystring/paystring-documentation/tree/master/docs/remote-deployment.md",sidebar_label:"Deploy on AWS",sidebar:"docs",previous:{title:"Deploy on AWS Lambda",permalink:"/payid-documentation/review-apps/loisrp-test-run/fc54b5/aws-lambda-deploy"},next:{title:"Set Up NGINX Reverse Proxy and SSL",permalink:"/payid-documentation/review-apps/loisrp-test-run/fc54b5/nginx-ssl-deploy"}},c=[{value:"Requirements",id:"requirements",children:[]},{value:"Deployment steps",id:"deployment-steps",children:[]}],b={rightToc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"You can set up a PayString server on AWS (Amazon Web Services) setting up your own virtual Linux server. Alternatively, you can set up a PayString server using ","[AWS Lambda][aws-lambda-deploy]","."),Object(o.b)("p",null,"When you have deployed a PayString server, you can then set up ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"nginx-ssl-deploy"}),"NGINX Reverse Proxy and SSL")," for load bearing and security."),Object(o.b)("h2",{id:"requirements"},"Requirements"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"An AWS account"),Object(o.b)("li",{parentName:"ul"},"Your own domain, for which you can update the DNS")),Object(o.b)("h2",{id:"deployment-steps"},"Deployment steps"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Initialize a ",Object(o.b)("inlineCode",{parentName:"li"},"t2.micro")," instance on AWS running Ubuntu 18.04m with a minimum of 8 GB SSD. For the purposes of this demo, you can use AWS Free Tier.\nSee ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html"}),"Getting Started with Amazon EC2 Linux Instances")," for more information about setting up your instance."),Object(o.b)("li",{parentName:"ol"},"Get an elastic IP address and associate it with your AWS ",Object(o.b)("inlineCode",{parentName:"li"},"t2.micro")," instance, as described in ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance"}),"Step 1, part 10"),"."),Object(o.b)("li",{parentName:"ol"},"Update the DNS for your PayString domain as shown in the following table. Add any other subdomain you would like to use as a PayString as well.")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Name"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Value"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"TTL"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"@"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"your-ip-address")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"600 seconds")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"your-payString-domain")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"your-ip-address")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"1/2 Hour")))),Object(o.b)("ol",{start:4},Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Set your instance's firewall/security group."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Port 80 (TCP) open for all address"),Object(o.b)("li",{parentName:"ul"},"Port 8081 (Admin API access) open for your local IP address only, or closed generally, or only available inside your virtual private cloud. If port 8081 is exposed publicly it allows anybody to update your payment information, potentially leading to a loss of funds."),Object(o.b)("li",{parentName:"ul"},"Port 22 (SSH) open"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"SSH into your instance."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Right-click on the instance."),Object(o.b)("li",{parentName:"ul"},"Click ",Object(o.b)("strong",{parentName:"li"},"Connect"),"."),Object(o.b)("li",{parentName:"ul"},"Copy the example command and run it in your local terminal. You must have local access to the private key file associated with your instance."))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Install git on your instance.\n",Object(o.b)("inlineCode",{parentName:"p"},"sudo apt-get install git"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Link the git on your instance to your GitHub account, as described in ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh"}),"Connecting to GitHub with SSH"),". Follow the instructions for ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent"}),"Generating a new SSH key and adding it to the ssh-agent"),".")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Install docker on your instance."),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"sudo apt-get update\nsudo apt install docker.io docker-compose\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Clone the Github repository: ",Object(o.b)("inlineCode",{parentName:"p"},"git clone git@github.com:paystring/paystring.git"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Set the docker port to 80 by modifying the ",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose.yml"),":"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Open the script editor: ",Object(o.b)("inlineCode",{parentName:"li"},"nano paystring/docker-compose.yml")),Object(o.b)("li",{parentName:"ul"},"Go to the ",Object(o.b)("inlineCode",{parentName:"li"},"ports")," property, and change: ",Object(o.b)("inlineCode",{parentName:"li"},"8080:8080")," to ",Object(o.b)("inlineCode",{parentName:"li"},"80:8080")))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Run this script to start PayString with a Postgres database: ",Object(o.b)("inlineCode",{parentName:"p"},"npm run devEnvUp")),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"To bring this down, run ",Object(o.b)("inlineCode",{parentName:"li"},"npm run devDown")))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Check your IP address and the website in your browser to confirm the server is running. You should see a success page that looks like ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://xpring.money/"}),"this"),".")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Load up your desired PayString to the database using the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://api.paystring.org/?version=latest#7a19329b-80eb-451f-bbb8-d9656892a788"}),"Admin API"),". If you use a subdomain rather than a path, then you must set up a DNS record for the subdomain as described in step 3.\n",Object(o.b)("strong",{parentName:"p"},"Note:")," You can add PayStrings for each (pay_id, network, environment) tuple. Use this cURL command to set up a PayString."),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'curl --location --request POST \'http://127.0.0.1:8081/users\' \\\n--header \'PayID-API-Version: 2020-06-16\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n "payId": "<user$domain.com>",\n "addresses": [{\n   "paymentNetwork": "XRPL",\n   "environment": "MAINNET",\n   "details": {\n     "address": "<your-address>"\n   }\n }]\n}\'\n'))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"From your local computer, run a cURL command to fetch your PayString. For example:"))),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"curl -X GET 'https://<domain.com/user>' --header 'Accept: application/xrpl-mainnet+json' --header 'PayID-version: 1.0'\n")),Object(o.b)("p",null,"For other PayString API methods, see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://api.paystring.org"}),"PayString API Reference"),"."),Object(o.b)("p",null,"To convert a PayString address to a URL endpoint, follow these patterns:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"user$wallet.com")," converts to ",Object(o.b)("inlineCode",{parentName:"li"},"https://wallet.com/user")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"user$subdomain.wallet.com/payid")," converts to ",Object(o.b)("inlineCode",{parentName:"li"},"https://subdomain.wallet.com/payid/user"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," Public API requests hit port 80 and Admin API requests hit port 8081 per the config in step 10. Make sure that 8081 is limited so that outsiders cannot modify your server\u2019s database."),Object(o.b)("p",null,"For additional network formats, see the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://api.paystring.org/?version=latest"}),"API Reference"),"."))}p.isMDXComponent=!0}}]);